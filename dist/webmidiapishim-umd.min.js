(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=setTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,clearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}var process=module.exports={},queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];queue.push(new Item(e,n)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],2:[function(require,module,exports){
"use strict";function createJazzInstance(e){var t="jazz_"+jazzInstanceNumber++ +Date.now(),n=void 0,a=void 0,i=void 0;if((0,_util.getDevice)().nodejs===!0)a=new jazzMidi.MIDI;else{var d=document.createElement("object");d.id=t+"ie",d.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",i=d;var r=document.createElement("object");r.id=t,r.type="audio/x-jazz",d.appendChild(r),a=r;var o=document.createElement("p");o.appendChild(document.createTextNode("This page requires the "));var c=document.createElement("a");c.appendChild(document.createTextNode("Jazz plugin")),c.href="http://jazz-soft.net/",o.appendChild(c),o.appendChild(document.createTextNode(".")),r.appendChild(o);var l=document.getElementById("MIDIPlugin");l||(l=document.createElement("div"),l.id="MIDIPlugin",l.style.position="absolute",l.style.visibility="hidden",l.style.left="-9999px",l.style.top="-9999px",document.body.appendChild(l)),l.appendChild(d)}setTimeout(function(){a.isJazz===!0?n=a:i.isJazz===!0&&(n=i),"undefined"!=typeof n&&(n._perfTimeZero=performance.now(),jazzInstances.set(t,n)),e(n)},jazzPluginInitTime)}function getJazzInstance(e,t){var n=null,a="input"===e?"inputInUse":"outputInUse",i=!0,d=!1,r=void 0;try{for(var o,c=jazzInstances.values()[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var l=o.value;if(l[a]!==!0){n=l;break}}}catch(s){d=!0,r=s}finally{try{!i&&c["return"]&&c["return"]()}finally{if(d)throw r}}null===n?createJazzInstance(t):t(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createJazzInstance=createJazzInstance,exports.getJazzInstance=getJazzInstance;var _util=require("./util"),jazzPluginInitTime=100,jazzInstanceNumber=0,jazzInstances=new Map;
},{"./util":9}],3:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function createMIDIAccess(){return new Promise(function(e,t){return"undefined"!=typeof midiAccess?void e(midiAccess):"ie9"===(0,_util.getDevice)().browser?void t({message:"WebMIDIAPIShim supports Internet Explorer 10 and above."}):void(0,_jazz_instance.createJazzInstance)(function(n){return"undefined"==typeof n?void t({message:"No access to MIDI devices: browser does not support the WebMIDI API and the Jazz plugin is not installed."}):(jazzInstance=n,void createMIDIPorts(function(){setupListeners(),midiAccess=new MIDIAccess(midiInputs,midiOutputs),e(midiAccess)}))})})}function createMIDIPorts(e){var t=jazzInstance.MidiInList(),n=jazzInstance.MidiOutList(),i=t.length,s=n.length;loopCreateMIDIPort(0,i,"input",t,function(){loopCreateMIDIPort(0,s,"output",n,e)})}function loopCreateMIDIPort(e,t,n,i,s){if(t>e){var o=i[e++];createMIDIPort(n,o,function(){loopCreateMIDIPort(e,t,n,i,s)})}else s()}function createMIDIPort(e,t,n){(0,_jazz_instance.getJazzInstance)(e,function(i){var s=void 0,o=[t,"",""];"input"===e?(i.Support("MidiInInfo")&&(o=i.MidiInInfo(t)),s=new _midi_input.MIDIInput(o,i),midiInputs.set(s.id,s)):"output"===e&&(i.Support("MidiOutInfo")&&(o=i.MidiOutInfo(t)),s=new _midi_output.MIDIOutput(o,i),midiOutputs.set(s.id,s)),n(s)})}function getPortByName(e,t){var n=void 0,i=!0,s=!1,o=void 0;try{for(var c,u=e.values()[Symbol.iterator]();!(i=(c=u.next()).done)&&(n=c.value,n.name!==t);i=!0);}catch(a){s=!0,o=a}finally{try{!i&&u["return"]&&u["return"]()}finally{if(s)throw o}}return n}function setupListeners(){jazzInstance.OnDisconnectMidiIn(function(e){var t=getPortByName(midiInputs,e);"undefined"!=typeof t&&(t.state="disconnected",t.close(),t._jazzInstance.inputInUse=!1,midiInputs["delete"](t.id),dispatchEvent(t))}),jazzInstance.OnDisconnectMidiOut(function(e){var t=getPortByName(midiOutputs,e);"undefined"!=typeof t&&(t.state="disconnected",t.close(),t._jazzInstance.outputInUse=!1,midiOutputs["delete"](t.id),dispatchEvent(t))}),jazzInstance.OnConnectMidiIn(function(e){createMIDIPort("input",e,function(e){dispatchEvent(e)})}),jazzInstance.OnConnectMidiOut(function(e){createMIDIPort("output",e,function(e){dispatchEvent(e)})})}function dispatchEvent(e){e.dispatchEvent(new _midiconnection_event.MIDIConnectionEvent(e,e));var t=new _midiconnection_event.MIDIConnectionEvent(midiAccess,e);"function"==typeof midiAccess.onstatechange&&midiAccess.onstatechange(t);var n=!0,i=!1,s=void 0;try{for(var o,c=listeners[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var u=o.value;u(t)}}catch(a){i=!0,s=a}finally{try{!n&&c["return"]&&c["return"]()}finally{if(i)throw s}}}function closeAllMIDIInputs(){midiInputs.forEach(function(e){e._jazzInstance.MidiInClose()})}function getMIDIDeviceId(e,t){var n=void 0;return"input"===t?(n=midiInputIds.get(e),"undefined"==typeof n&&(n=(0,_util.generateUUID)(),midiInputIds.set(e,n))):"output"===t&&(n=midiOutputIds.get(e),"undefined"==typeof n&&(n=(0,_util.generateUUID)(),midiOutputIds.set(e,n))),n}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();exports.createMIDIAccess=createMIDIAccess,exports.dispatchEvent=dispatchEvent,exports.closeAllMIDIInputs=closeAllMIDIInputs,exports.getMIDIDeviceId=getMIDIDeviceId;var _jazz_instance=require("./jazz_instance"),_midi_input=require("./midi_input"),_midi_output=require("./midi_output"),_midiconnection_event=require("./midiconnection_event"),_util=require("./util"),midiAccess=void 0,jazzInstance=void 0,midiInputs=new Map,midiOutputs=new Map,midiInputIds=new Map,midiOutputIds=new Map,listeners=new Set,MIDIAccess=function(){function e(t,n){_classCallCheck(this,e),this.sysexEnabled=!0,this.inputs=t,this.outputs=n}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){"statechange"===e&&listeners.has(t)===!1&&listeners.add(t)}},{key:"removeEventListener",value:function(e,t,n){"statechange"===e&&listeners.has(t)===!0&&listeners["delete"](t)}}]),e}();
},{"./jazz_instance":2,"./midi_input":4,"./midi_output":5,"./midiconnection_event":6,"./util":9}],4:[function(require,module,exports){
"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MIDIInput=void 0;var _createClass=function(){function e(e,i){for(var s=0;s<i.length;s++){var t=i[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(i,s,t){return s&&e(i.prototype,s),t&&e(i,t),i}}(),_util=require("./util"),_midimessage_event=require("./midimessage_event"),_midiconnection_event=require("./midiconnection_event"),_midi_access=require("./midi_access"),midiProc=void 0,nodejs=(0,_util.getDevice)().nodejs,MIDIInput=exports.MIDIInput=function(){function e(i,s){_classCallCheck(this,e),this.id=(0,_midi_access.getMIDIDeviceId)(i[0],"input"),this.name=i[0],this.manufacturer=i[1],this.version=i[2],this.type="input",this.state="connected",this.connection="pending",this.onstatechange=null,this._onmidimessage=null,Object.defineProperty(this,"onmidimessage",{set:function(e){this._onmidimessage=e,"function"==typeof e&&this.open()}}),this._listeners=(new Map).set("midimessage",new Set).set("statechange",new Set),this._inLongSysexMessage=!1,this._sysexBuffer=new Uint8Array,this._jazzInstance=s,this._jazzInstance.inputInUse=!0,"linux"===(0,_util.getDevice)().platform&&this._jazzInstance.MidiInOpen(this.name,midiProc.bind(this))}return _createClass(e,[{key:"addEventListener",value:function(e,i,s){var t=this._listeners.get(e);"undefined"!=typeof t&&t.has(i)===!1&&t.add(i)}},{key:"removeEventListener",value:function(e,i,s){var t=this._listeners.get(e);"undefined"!=typeof t&&t.has(i)===!1&&t["delete"](i)}},{key:"dispatchEvent",value:function(e){var i=this._listeners.get(e.type);i.forEach(function(i){i(e)}),"midimessage"===e.type?null!==this._onmidimessage&&this._onmidimessage(e):"statechange"===e.type&&null!==this.onstatechange&&this.onstatechange(e)}},{key:"open",value:function(){"open"!==this.connection&&("linux"!==(0,_util.getDevice)().platform&&this._jazzInstance.MidiInOpen(this.name,midiProc.bind(this)),this.connection="open",(0,_midi_access.dispatchEvent)(this))}},{key:"close",value:function(){"closed"!==this.connection&&("linux"!==(0,_util.getDevice)().platform&&this._jazzInstance.MidiInClose(),this.connection="closed",(0,_midi_access.dispatchEvent)(this),this._onmidimessage=null,this.onstatechange=null,this._listeners.get("midimessage").clear(),this._listeners.get("statechange").clear())}},{key:"_appendToSysexBuffer",value:function(e){var i=this._sysexBuffer.length,s=new Uint8Array(i+e.length);s.set(this._sysexBuffer),s.set(e,i),this._sysexBuffer=s}},{key:"_bufferLongSysex",value:function(e,i){for(var s=i;s<e.length;){if(247==e[s])return s++,this._appendToSysexBuffer(e.slice(i,s)),s;s++}return this._appendToSysexBuffer(e.slice(i,s)),this._inLongSysexMessage=!0,s}}]),e}();midiProc=function(e,i){var s=0,t=void 0,n=!1;for(t=0;t<i.length;t+=s){var a=!0;if(this._inLongSysexMessage){if(t=this._bufferLongSysex(i,t),247!=i[t-1])return;n=!0}else switch(n=!1,240&i[t]){case 0:s=1,a=!1;break;case 128:case 144:case 160:case 176:case 224:s=3;break;case 192:case 208:s=2;break;case 240:switch(i[t]){case 240:if(t=this._bufferLongSysex(i,t),247!=i[t-1])return;n=!0;break;case 241:case 243:s=2;break;case 242:s=3;break;default:s=1}}if(a){var r={};if(r.receivedTime=parseFloat(e.toString())+this._jazzInstance._perfTimeZero,n||this._inLongSysexMessage?(r.data=new Uint8Array(this._sysexBuffer),this._sysexBuffer=new Uint8Array(0),this._inLongSysexMessage=!1):r.data=new Uint8Array(i.slice(t,s+t)),nodejs)this._onmidimessage&&this._onmidimessage(r);else{var c=new _midimessage_event.MIDIMessageEvent(this,r.data,r.receivedTime);this.dispatchEvent(c)}}}};
},{"./midi_access":3,"./midiconnection_event":6,"./midimessage_event":7,"./util":9}],5:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MIDIOutput=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_util=require("./util"),_midi_access=require("./midi_access"),MIDIOutput=exports.MIDIOutput=function(){function e(t,n){_classCallCheck(this,e),this.id=(0,_midi_access.getMIDIDeviceId)(t[0],"output"),this.name=t[0],this.manufacturer=t[1],this.version=t[2],this.type="output",this.state="connected",this.connection="pending",this.onmidimessage=null,this.onstatechange=null,this._listeners=new Set,this._inLongSysexMessage=!1,this._sysexBuffer=new Uint8Array,this._jazzInstance=n,this._jazzInstance.outputInUse=!0,"linux"===(0,_util.getDevice)().platform&&this._jazzInstance.MidiOutOpen(this.name)}return _createClass(e,[{key:"open",value:function(){"open"!==this.connection&&("linux"!==(0,_util.getDevice)().platform&&this._jazzInstance.MidiOutOpen(this.name),this.connection="open",(0,_midi_access.dispatchEvent)(this))}},{key:"close",value:function(){"closed"!==this.connection&&("linux"!==(0,_util.getDevice)().platform&&this._jazzInstance.MidiOutClose(),this.connection="closed",(0,_midi_access.dispatchEvent)(this),this.onstatechange=null,this._listeners.clear())}},{key:"send",value:function(e,t){var n=this,i=0;return 0===e.length?!1:(t&&(i=Math.floor(t-performance.now())),t&&i>1?setTimeout(function(){n._jazzInstance.MidiOutLong(e)},i):this._jazzInstance.MidiOutLong(e),!0)}},{key:"clear",value:function(){}},{key:"addEventListener",value:function(e,t,n){"statechange"===e&&this._listeners.has(t)===!1&&this._listeners.add(t)}},{key:"removeEventListener",value:function(e,t,n){"statechange"===e&&this._listeners.has(t)===!1&&this._listeners["delete"](t)}},{key:"dispatchEvent",value:function(e){this._listeners.forEach(function(t){t(e)}),null!==this.onstatechange&&this.onstatechange(e)}}]),e}();
},{"./midi_access":3,"./util":9}],6:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var MIDIConnectionEvent=exports.MIDIConnectionEvent=function t(e,s){_classCallCheck(this,t),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=e,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.port=s,this.returnValue=!0,this.srcElement=e,this.target=e,this.timeStamp=Date.now(),this.type="statechange"};
},{}],7:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var MIDIMessageEvent=exports.MIDIMessageEvent=function e(t,s,a){_classCallCheck(this,e),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=t,this.data=s,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.receivedTime=a,this.returnValue=!0,this.srcElement=t,this.target=t,this.timeStamp=Date.now(),this.type="midimessage"};
},{}],8:[function(require,module,exports){
(function (global){
"use strict";var _midi_access=require("./midi_access"),_midi_input=require("./midi_input"),_midi_output=require("./midi_output"),_midimessage_event=require("./midimessage_event");!function(){"undefined"==typeof navigator.requestMIDIAccess&&(global.MIDIInput=_midi_input.MIDIInput,global.MIDIOutput=_midi_output.MIDIOutput,global.MIDIMessageEvent=_midimessage_event.MIDIMessageEvent,navigator.requestMIDIAccess=function(){return console.log("webmidiapishim 1.0.2",navigator.requestMIDIAccess),(0,_midi_access.createMIDIAccess)()})}();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./midi_access":3,"./midi_input":4,"./midi_output":5,"./midimessage_event":7}],9:[function(require,module,exports){
(function (process,global){
"use strict";function generateUUID(){var e=(new Date).getTime(),o=new Array(64).join("x");return o=o.replace(/[xy]/g,function(o){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==o?n:3&n|8).toString(16).toUpperCase()})}function getDevice(){if("undefined"!=typeof device)return device;var e="undetected",o="undetected";if(navigator.nodejs)return e=process.platform,device={platform:e,nodejs:!0,mobile:"ios"===e||"android"===e};var n=navigator.userAgent;return n.match(/(iPad|iPhone|iPod)/g)?e="ios":-1!==n.indexOf("Android")?e="android":-1!==n.indexOf("Linux")?e="linux":-1!==n.indexOf("Macintosh")?e="osx":-1!==n.indexOf("Windows")&&(e="windows"),-1!==n.indexOf("Chrome")?(o="chrome",-1!==n.indexOf("OPR")?o="opera":-1!==n.indexOf("Chromium")&&(o="chromium")):-1!==n.indexOf("Safari")?o="safari":-1!==n.indexOf("Firefox")?o="firefox":-1!==n.indexOf("Trident")&&(o="ie",-1!==n.indexOf("MSIE 9")&&(o="ie9")),"ios"===e&&-1!==n.indexOf("CriOS")&&(o="chrome"),device={platform:e,browser:o,mobile:"ios"===e||"android"===e,nodejs:!1}}function polyfillPerformance(){"undefined"==typeof performance&&(performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"undefined"==typeof performance.now&&!function(){var e=Date.now();"undefined"!=typeof performance.timing&&"undefined"!=typeof performance.timing.navigationStart&&(e=performance.timing.navigationStart),performance.now=function(){return Date.now()-e}}()}function polyfillPromise(e){"function"!=typeof e.Promise&&(e.Promise=function(e){this.executor=e},e.Promise.prototype.then=function(e,o){"function"!=typeof e&&(e=function(){}),"function"!=typeof o&&(o=function(){}),this.executor(e,o)})}function polyfill(){var e=getDevice();"ie"===e.browser?polyfillPromise(window):e.nodejs===!0&&polyfillPromise(global),polyfillPerformance()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateUUID=generateUUID,exports.getDevice=getDevice,exports.polyfillPerformance=polyfillPerformance,exports.polyfillPromise=polyfillPromise,exports.polyfill=polyfill;var device=void 0;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1}]},{},[8])

